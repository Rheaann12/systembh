<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tenant Message</title>
    <!-- Linking Google Font Link For Icons --> 
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="/css/tenant/tenantMessage.css"> 
</head>
<body>
    <div class="header">


    <!-- Notifications -->
    <div class="notifications">
        <span class="material-symbols-outlined" id="notifIcon">notifications</span>
        <div class="notif-count" id="notifCount">3</div>
    </div>


        <div class="user-account">
            <div class="user-profile">
                <img src="/image/profile-img.png" alt="profile-img">
                <div class="user-detail">
            <h3><%= tenant2.FirstName || tenant2.firstName %> <%= tenant2.LastName || tenant2.lastName %></h3>
             <span>Tenant</span>
</div>

                   
                </div>
            </div>
        </div>
    </div>


        <!-- Notification Popup -->
<div class="notif-popup" id="notifPopup">
    <div class="notif-popup-header">
        <h4>Notifications</h4>
        <span id="closeNotif">&times;</span>
    </div>
    <div class="notif-popup-body">
        <p class="notif-item">Payment status updated. Please check your account for details.</p>
       
    </div>
    <div class="notif-popup-footer">
        <p class="view-all">View all notifications</p>
    </div>
</div>

    <aside class="sidebar">
        <div class="sidebar-header">
            <img src="/image/logo.png" alt="logo">
            <h3>BH Payment Monitoring </h3>
        </div>
        <ul class="sidebar-links">
            <!-- <h4>Main Menu</h4> -->
            <div class="menu-separator"></div>
           
             <li><a href="tenantPayment"><span class="material-symbols-outlined">payments</span>Payment</a></li>
              <li><a href="history"><span class="material-symbols-outlined">history</span> History</a></li>
        
              <li class="messages">
    <a href="tenantMessage" class="messages-link">
        <span class="material-symbols-outlined" id="messageIcon">chat</span>
        Messages
        <span class="msg-count" id="msgCount">5</span>
    </a>
</li>

            <li><a href="loginTenant"><span class="material-symbols-outlined">Logout</span>Logout</a></li>
        </ul>
        
    </aside>

    <main class="main-content p-4 w-100">
        <div class="sticky-header">
            <!-- <h4>Messages</h4> -->
        </div>

    
   
  
    <!-- RIGHT PANEL -->
    <div class="chat-main">

        <!-- Header -->
        <div class="chat-header">
            <img src="/image/profile-img.png">
            <h4>Aileen Mercado</h4>
            <!-- <small>Online • Last seen 2:02pm</small> -->
        </div>

        <!-- Messages -->
        <div class="chat-messages">

            <div class="msg outgoing">
                <p>Hello po pwede ko maghangyo sa akoang monthly rent?</p>
                <span>Today, 8:33pm</span>
            </div>

        

            <div class="msg incoming">
                <p>kanus'a man nimo bayran?</p>
                <span>Today, 8:36pm</span>
            </div>

            <div class="msg outgoing">
                <p>Sa katapusan siguro</p>
                <span>Today, 8:58pm</span>
            </div> 
             
                <div class="msg incoming">
                <p>Oki</p>
                <span>Today, 8:36pm</span>
            </div>

        </div>

        <!-- Input -->
        <div class="chat-input">
            <input type="text" placeholder="Type your message here...">
            <button>➤</button>
        </div>

    </div>

</div>

</div>

</main>

<script>
// ================== CHAT MESSAGE SCRIPT ==================
const chatInput = document.querySelector('.chat-input input');
const sendBtn = document.querySelector('.chat-input button');
const chatMessages = document.querySelector('.chat-messages');

function sendMessage() {
    const message = chatInput.value.trim();
    if (message === '') return;

    const msgDiv = document.createElement('div');
    msgDiv.classList.add('msg', 'outgoing');

    msgDiv.innerHTML = `
        <p>${message}</p>
        <span>${new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}</span>
    `;

    chatMessages.appendChild(msgDiv);
    chatInput.value = '';
    chatMessages.scrollTop = chatMessages.scrollHeight;
}

sendBtn.addEventListener('click', sendMessage);

chatInput.addEventListener('keypress', (e) => {
    if (e.key === 'Enter') {
        e.preventDefault();
        sendMessage();
    }
});


// ================== MESSAGE BADGE RESET ==================
const messageLink = document.querySelector('.messages-link');
const msgCount = document.getElementById('msgCount');

messageLink.addEventListener('click', () => {
    msgCount.style.display = 'none';
});

</script>

<script>
const notifIcon = document.getElementById('notifIcon');
const notifPopup = document.getElementById('notifPopup');
const closeNotif = document.getElementById('closeNotif');

notifIcon.addEventListener('click', () => {
    notifPopup.style.display = 'block';
});

closeNotif.addEventListener('click', () => {
    notifPopup.style.display = 'none';
});

// Close popup if clicked outside
window.addEventListener('click', (e) => {
    if (e.target === notifPopup) return;
    if (!notifPopup.contains(e.target) && e.target !== notifIcon) {
        notifPopup.style.display = 'none';
    }
});
</script>

</body>
</html>