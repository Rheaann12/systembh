<!-- monthlypayment.ejs -->


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Monthly Payment</title>

    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Icons" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="/css/admin/monthlypayment.css">
</head>
<body>
   <div class="header">

    <!-- Notifications -->
    <div class="notifications">
        <span class="material-symbols-outlined" id="notifIcon">notifications</span>
        <div class="notif-count" id="notifCount">3</div>
    </div>

    
    <!-- User Account -->
    <div class="user-account">
        <div class="user-profile">
            <img src="/image/profile-img.png" alt="profile-img">
            <div class="user-detail">
                <h3>Aileen Mercado</h3>
                <span>Landlord</span>
            </div>
        </div>
    </div>
</div>

<!-- Notification Popup -->
<div class="notif-popup" id="notifPopup">
    <div class="notif-popup-header">
        <h4>Notifications</h4>
        <span id="closeNotif">&times;</span>
    </div>
    <div class="notif-popup-body">
        <p class="notif-item">New payment received from Juan Dela Cruz</p>
        <p class="notif-item">Room 101 is now available</p>
        <p class="notif-item">Tenant Maria updated profile</p>
    </div>
    <div class="notif-popup-footer">
        <p class="view-all">View all notifications</p>
    </div>
</div>


    <aside class="sidebar">
        <div class="sidebar-header">
            <img src="/image/logo.png" alt="logo">
            <h3>BH Payment Monitoring </h3>
        </div>
        <ul class="sidebar-links">
            <!-- <h4>Main Menu</h4> -->
            <div class="menu-separator"></div>
            <li><a href="Admindashboard"><span class="material-symbols-outlined">Dashboard</span>Dashboard</a></li>
            <li><a href="usermanagement"><span class="material-symbols-outlined">Manage_Accounts</span>Tenants</a></li>
            <li><a href="room"><span class="material-symbols-outlined">room_preferences</span>Room</a></li>
            <li><a href="payment"><span class="material-symbols-outlined">payments</span>Deposit</a></li>
            <li><a href="monthlypayment"><span class="material-symbols-outlined">money</span>Monthly Payment</a></li>
          
        <li class="messages">
    <a href="message" class="messages-link">
        <span class="material-symbols-outlined" id="messageIcon">chat</span>
        Messages
        <span class="msg-count" id="msgCount">5</span>
    </a>
</li>
            <li><a href="/login"><span class="material-symbols-outlined">Logout</span>Logout</a></li>
        </ul>
        
    </aside>
<main class="main-content">
    <div class="top">
    
    <div class="table-section">
        <div class="table-header">
             <div class="sticky-header">
        <h4>Monthly Payment</h4> </div>
            <button class="btn-add" id="openModalBtn">Add Payment</button>
        </div>

  <table class="payment-table">
    <thead>
        <tr>
            <th>Tenant Name</th>
            <th>Monthly Due Date</th>
            <th>Monthly Rent</th>
            <th>Date Paid</th>
            <th>Amount Paid</th>
            <th>Remaining Balance</th>
        </tr>
    </thead>
    <tbody>
        <% if (monthlyPayments && monthlyPayments.length > 0) { %>
            <% monthlyPayments.forEach(payment => { %>
                <tr>
                    <td><%= payment.tenant_name %></td>
                    <td><%= payment.monthly_due_date %></td>
                    <td><%= payment.monthly_rent %></td>
                    <td><%= payment.date_paid || '-' %></td>
                    <td><%= payment.amount_paid %></td>
                    <td><%= payment.remaining_balance %></td>
                </tr>
            <% }) %>
        <% } else { %>
            <tr>
                <td colspan="6">No records found</td>
            </tr>
        <% } %>
    </tbody>
</table>

    </div>

    <!-- Add Payment Modal -->
    <div class="modal" id="addModal">
        <div class="modal-content">
            <span class="close" id="closeModal">&times;</span>
            <h4>Add Monthly Payment</h4>
            <form action="/admin/addMonthlyPayment" method="POST">
                <input type="text" name="tenant_name" placeholder="Tenant Name" required>
                <input type="date" name="monthly_due_date" placeholder="Due Date" required>
                <input type="number" step="0.01" name="monthly_rent" placeholder="Monthly Rent" required>
                <input type="date" name="date_paid" placeholder="Date Paid">
                <input type="number" step="0.01" name="amount_paid" placeholder="Amount Paid">
                <input type="number" step="0.01" name="remaining_balance" placeholder="Remaining Balance" required>
                <button type="submit">Save</button>
            </form>
        </div>
    </div>

</main>

<script>
    const modal = document.getElementById("addModal");
    const openModalBtn = document.getElementById("openModalBtn");
    const closeModalBtn = document.getElementById("closeModal");

    openModalBtn.onclick = () => modal.style.display = "block";
    closeModalBtn.onclick = () => modal.style.display = "none";
    window.onclick = (e) => { if (e.target == modal) modal.style.display = "none"; }
</script>



</body>

</html>
       